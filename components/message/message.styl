.message {
  p {
    margin: 0
  }

  &__content {
    flex: 1;
    position: relative;
    opacity: 1;
  }

  &__margin {
    display: flex
  }

  &--group {
    .message-info {
      visibility: hidden
    }
    .message-wrapper {
      &:before {
        visibility: hidden
      }
    }
  }
}

.message-wrapper {
  min-width: 42px;
  box-sizing: content-box;
  min-height: 1.35em;
  display: inline-block;
  overflow: hidden;
  padding: 16px 24px;
  border-radius: 3px;
  box-shadow: none;
}


.message-info {
  min-width: 40px;
  width: 40px;
  margin-left: 0;
  margin-right: 20px;
  position: relative;
  display: flex;
  flex-direction: column;
  &__time {
    font-size: 10px
    text-align: center
    transition: color .75s
    width: 100%
    position: absolute
  }
  &__avatar-wrapper {
    position: absolute
    bottom: 0
    width: 40px
    min-height: 40px
    height: 40px
    z-index: 0
    transition: background-color .75s
  }
  &__avatar {
    transform: scale(1);
    background-repeat: no-repeat;
    width: 100%
    height: 100%
    background-size: contain;
    background-position: 50%;
  }
}

.message-outgoing {
  .message-wrapper {
    transition: opacity .5s,background-color .75s,color .75s
    box-shadow: 0 1px 28px 0 rgba(90,60,122,.22)
    max-width: 82%
    &:before {
      opacity: 0
      transition: all .35s;
      content: "";
      width: 11px;
      height: 10px;
      display: inline-block;
      position: absolute;
      left: -9px;
      bottom: 12px;
      background-size: 40px;
      background-repeat: no-repeat;
      background-position: 50%;
      mask-image: url('~assets/corner.svg');
      background-color: rgb(255, 255, 255);
      z-index: 1;
    }
  }

  .message-info {
    justify-content: flex-end
    visibility: hidden;

    &.visible {
      visibility: visible;
      + .message__content .message-wrapper {
        &:before {
          opacity: 1;
        }
      }
    }
  }
  .message-info__time {
    height: 1em
    position: relative
    bottom: -16px
  }
}



.message-incoming {
  .message__margin {
    flex-direction: row-reverse
  }

  .message-wrapper {
    background: #40c4ff
    color: #fff
  }

  .message-info {
    width: 0
    min-width: 0
    &__time {
      top: 15px;
      left: 12px;
      color: #40c4ff
    }
  }

  .message__content {
    display: flex
    justify-content: flex-end
  }
}

.message-incoming:not(:first-child) .message__margin,
.message-outgoing:not(:first-child) .message__margin {
  margin-top: 15px;
}

.message-incoming + .message-incoming .message__margin,
.message-outgoing + .message-outgoing .message__margin {
  margin-top: 2px;
}

.typing-spinner {
  display: inline-flex
  align-items: center
  vertical-align: bottom
  opacity: 0
  height: 1.35em
  transition: opacity .1s
  pointer-events: none
  position: absolute
  top: 50%
  transform: translateY(-50%)
  &__ball {
    display: inline-block;
    width: 9px;
    height: 9px;
    margin-right: 5px;
    border-radius: 50%;
    &:first-child {
      opacity: .9;
      animation: f .9s linear infinite;
    }
    &:nth-child(2) {
      opacity: .3;
      animation: f .9s .225s linear infinite;
    }
    &:last-child {
      opacity: .6;
      animation: f .9s .45s linear infinite;
    }
  }
}
